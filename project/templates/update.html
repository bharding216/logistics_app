{% extends 'base.html' %}

{% block head %}
{% endblock %}

{% block body %}
<h2>Update Appointment</h2><br>

<div class="container mb-5">
    <form action="/update/{{appt.id}}" method="POST" onsubmit="update_appt_popup()" class="form">

        <div class="row">
            <div class="col-6 col-sm-6 col-md-6 col-lg-4">

                <h4>Current carrier: <u>{{ appt.carrier }}</u></h4>
                <label><b>Choose a Carrier:</b></label><br>
                <select name="carrier" class="form-select">
                    {% for carrier in carriers %}
                        <option value = "{{ carrier.carrier_name }}" {% if carrier.carrier_name == appt.carrier %} selected {% endif %}>{{ carrier.carrier_name }}</option>
                    {% endfor %}
                </select>


                <p class="note">Don't see your carrier in the dropdown menu?</p>
                <a
                    href="{{ url_for('views.new_carrier') }}"
                    class="btn btn-outline-success"
                    role="button">Create New Carrier
                </a>
            </div>
        </div><br>


                <!--
                <h4>Don't see your carrier in the dropdown menu?</h4>
                <form action="{{ url_for('views.new_carrier') }}">
                    <input type="submit" value="Add New Carrier" 
                        class="create_edit">-->



        <div class="row">
            <div class="col-6 col-sm-6 col-md-6 col-lg-4">
                <h4>Current volume: <u>{{ appt.volume }} gallons</u></h4>
                <label for="volume_update"><b>Requested Volume [gallons]:</b></label><br>
                <input class="form-control" type="number" name="volume_update" id="volume"
                    value="{{ appt.volume }}"><br><br>
            </div>
        </div>



        <div class="row">
            <h4>Current material: <u>{{ appt.material }}</u></h4>
            <p class="list_heading"><b>Select a product:</b></p>

            <div class="col-sm-4 col-md-3 col-lg-2">

                <p class="list_heading">HCl:</p>
                <div class="form-check">
                    <input type="radio" class="form-check-input" name="material_update" id="36%_HCl" value="36% HCl">
                    <label class="form=check-label" for="36% HCl">36% HCl</label>
                </div>

                <div class="form-check">
                    <input type="radio" name="material_update" id="32%_HCl" 
                        value="32% HCl" class="form-check-input">
                    <label for="32% HCl" class="form-check-label">32% HCl</label><br>
                </div>

                <div class="form-check">
                    <input type="radio" name="material_update" id="15%_HCl" value="15% HCl" class="form-check-input">
                    <label for="15% HCl" class="form-check-label">15% HCl</label><br>
                </div>

            </div>

            <div class="col-sm-4 col-md-3 col-lg-2">
                <p class="list_heading">Caustic:</p>

                <div class="form-check">
                    <input type="radio" name="material_update" id="50%_Caustic" 
                        value="50% Caustic" class="form-check-input">
                    <label for="50% Caustic" class="form-check-label">50% Caustic</label><br>
                </div>

                <div class="form-check">
                    <input type="radio" name="material_update" id="25%_Caustic" 
                        value="25% Caustic" class="form-check-input">
                    <label for="25% Caustic" class="form-check-label">25% Caustic</label><br>
                </div>

                <div class="form-check">
                    <input type="radio" name="material_update" id="20%_Caustic" 
                        value="20% Caustic" class="form-check-input">
                    <label for="20% Caustic" class="form-check-label">20% Caustic</label><br>
                </div>
            </div>

            <div class="col-sm-4 col-md-3 col-lg-2">
                    <p class="list_heading">Bleach:</p>


                <div class="form-check">
                    <input type="radio" name="material_update" id="12.5%_Bleach" 
                        value="12.5% Bleach" class="form-check-input">
                    <label for="12.5% Bleach" class="form-check-label">12.5% Bleach</label><br>
                </div>

                <div class="form-check">
                    <input type="radio" name="material_update" id="10%_Bleach" 
                        value="10% Bleach" class="form-check-input">
                    <label for="10% Bleach" class="form-check-label">10% Bleach</label><br><br>
                </div>

            </div>
        </div><br>


        <div class="row">
            <div class="col-8 col-sm-6 col-md-6 col-lg-4">
                <h4>Current pickup date: <u>{{ appt.pickup_date }}</u></h4>
                <label for="pickup_date"><b>Select a new date:</b></label>
                <input type="date" id="pickup_date" name="pickup_date" value="{{ appt.pickup_date }}">
            </div>
        </div><br>


        <div class="row">
            <div class="col-6 col-sm-6 col-md-6 col-lg-4">
                <h4>Current pickup time: <u>{{ appt.pickup_time }}</u></h4>
                <label for="pickup_time"><b>Select a new time:</b></label>
                <input type="time" id="pickup_time" name="pickup_time" 
                    value="{{ appt.pickup_time }}">
            </div>
        </div><br>



        <div class="row">
            <div class="col-6 col-sm-6 col-md-6 col-lg-4">
                <h4>Current PO #: <u>{{ appt.PO_number }}</u></h4>
                <label>Enter a new PO Number:</label><br>
                <input type="text" id="PO_number" name="PO_number_update" 
                    value="{{ appt.PO_number }}" class="form-control">
            </div>
        </div><br>



        <button type="submit" class="btn btn-outline-success" id="update_button" disabled>Submit</button>


    </form>


</div>



















    <script>
        //define a variable named 'update' to represent the button
        let update = document.querySelector('#update_button');
        //when you click on the form, call the function named 'enable'
        document.querySelector('form').addEventListener('click', enable);

        //if you clicked a radio button, enable the submit button
        function enable(event) {
            if(event.target.name === 'material_update') {
                update.disabled = false;
            }
        }
    </script>



{% endblock %}
